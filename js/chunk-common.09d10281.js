(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"07de":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{staticClass:"my-card",staticStyle:{position:"relative"}},[a("q-card-section",{staticClass:"bg-secondary text-white text-center"},[a("div",{staticClass:"text-h6"},[t._v(t._s(t.translate("PROJECT.NAME")))]),a("q-tabs",{staticClass:"text-white",model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab",{attrs:{name:"login",icon:"login",label:"Login"}}),a("q-tab",{attrs:{name:"register",icon:"person_add",label:"Register"}})],1)],1),a("q-card-section",{staticClass:"bg-secondary text-white q-pa-none"},[a("q-tab-panels",{staticClass:"bg-secondary q-ma-none full-width q-pa-none",attrs:{animated:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"login"}},[a("loginForm")],1),a("q-tab-panel",{attrs:{name:"register"}},[a("registrationForm")],1)],1)],1)],1)},n=[],i=a("310f"),o=function(){var t=this,e=this,a=e.$createElement,s=e._self._c||a;return s("q-form",{ref:"userRegistrationForm",staticClass:"q-gutter-md text-white",on:{submit:e.createUser,reset:e.onReset}},[s("q-input",{attrs:{filled:"",type:"text",label:"first name","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please enter your name"}]},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)}},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}}),s("q-input",{attrs:{filled:"",type:"text",label:"last name","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please enter your name"}]},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)}},model:{value:e.lastName,callback:function(t){e.lastName=t},expression:"lastName"}}),s("q-select",{attrs:{"use-input":"",filled:"",options:e.genders,label:"Gender","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please select your gender"}]},model:{value:e.gender,callback:function(t){e.gender=t},expression:"gender"}}),s("q-input",{attrs:{filled:"",mask:"date",label:"Date of Birth(YYYY/MM/DD)",rules:["date",function(t){return t&&t.length>0||"Please enter your dob"}]},scopedSlots:e._u([{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[s("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-date",{model:{value:e.dob,callback:function(t){e.dob=t},expression:"dob"}},[s("div",{staticClass:"row items-center justify-end"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.dob,callback:function(t){e.dob=t},expression:"dob"}}),s("q-input",{attrs:{filled:"",type:"email",label:"email","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please enter your email address"},function(e){return t.isValidEmail()||"Invalid email address"}]},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)}},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e.showAccept?s("terms",{attrs:{accept:e.accept,main:e.mainLocal}}):e._e(),e.showActivation?s("div",{staticClass:"col"},[s("q-checkbox",{staticClass:"col",attrs:{label:"Send Activation Email"},model:{value:e.activationEmail,callback:function(t){e.activationEmail=t},expression:"activationEmail"}}),s("q-checkbox",{staticClass:"col",attrs:{label:"Show Activation link"},model:{value:e.showActivationLink,callback:function(t){e.showActivationLink=t},expression:"showActivationLink"}})],1):e._e(),s("div",[s("q-btn",{attrs:{label:"Submit",type:"submit",color:"primary"}}),s("q-btn",{staticClass:"q-ml-sm",attrs:{label:"Reset",type:"reset",color:"white",flat:""}})],1),s("activationLink",{attrs:{alert:e.alert,alertUserId:e.alertUserId,main:e.main}})],1)},r=[],l=(a("ddb0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-toggle",{attrs:{color:"secondary"},on:{input:t.toggled},model:{value:t.localAccept,callback:function(e){t.localAccept=e},expression:"localAccept"}}),t._v("I\n  accept the\n  "),a("a",{staticClass:"text-underline text-italic",staticStyle:{"text-decoration":"underline",cursor:"pointer"},attrs:{clickable:""},on:{click:t.showTerms}},[t._v("terms and conditions")]),a("q-dialog",{attrs:{"transition-show":"rotate","transition-hide":"rotate"},model:{value:t.termsDialog,callback:function(e){t.termsDialog=e},expression:"termsDialog"}},[a("q-card",[a("q-card-section",{staticClass:"q-pt-none"},[""!==t.termsText?a("q-markdown",[t._v("\n          "+t._s(t.termsText)+"\n        ")]):t._e()],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"primary"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Ok",color:"primary"}})],1)],1)],1)],1)}),c=[],u=a("cf57");a("bc3a"),a("1712").to;const d=a("9fea")();var m={name:"terms",props:{accept:Boolean,main:Function},created(){this.myParent=this.main(),this.localAccept=this.accept},data(){return{localAccept:!1,myParent:null,termsText:"",termsDialog:!1}},methods:{async showTerms(){this.termsDialog=!0,this.termsText=d},toggled(t){this.$nextTick((function(){this.myParent.changeAccept(t)}))},showCustom(t=""){const e=this.$q.dialog({title:t,message:"",progress:{spinner:u["a"],color:"primary"},persistent:!0,ok:!1}),a=setInterval((()=>{!1===this.working&&(clearInterval(a),e.hide())}),500)}}},p=m,h=a("2877"),f=a("9564"),g=a("24e8"),b=a("f09f"),v=a("a370"),w=a("4b7e"),y=a("9c40"),k=a("7f67"),x=a("eebe"),C=a.n(x),q=Object(h["a"])(p,l,c,!1,null,null,null),A=q.exports;C()(q,"components",{QToggle:f["a"],QDialog:g["a"],QCard:b["a"],QCardSection:v["a"],QCardActions:w["a"],QBtn:y["a"]}),C()(q,"directives",{ClosePopup:k["a"]});var E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{attrs:{"full-width":""},model:{value:t.innerAlert,callback:function(e){t.innerAlert=e},expression:"innerAlert"}},[a("q-card",[a("q-toolbar",{staticClass:"bg-primary text-white"},[a("q-toolbar-title",[a("span",{staticClass:"text-weight-bold"},[t._v("User activation link")])]),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),a("q-card-section",[t._v("\n      In order to activate user use the following\n      "),a("a",{attrs:{href:t.activationPage}},[t._v("activation link")]),t._v(" :\n    ")]),a("q-card-section",{staticClass:"text-center row flex flex-center"},[a("div",{staticClass:"col text-no-wrap flex flex-center"},[a("code",{staticClass:"bg-grey-4 text-h6 text-bold q-pa-md row text-no-wrap",staticStyle:{"overflow-x":"scroll","overflow-y":"none"}},[t._v(t._s(t.activationPage))]),a("q-btn",{staticClass:"text-primary",attrs:{icon:"content_copy",flat:""},on:{click:t.copyActivationLinkToClipBoard}},[a("q-tooltip",[t._v(" Copy activation link ")])],1)],1)]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"OK",color:"primary"}})],1)],1)],1)},L=[];const _=a("1712").to,S=a("20e6"),T=a("c2a1").default;var N={name:"activationLink",components:{},props:["inside","alert","alertUserId","main"],async created(){T.setSettings({TBURL:S["TB_URL"]}),T.setSettings(S),this.showAccept=!1,this.accept=!0},data(){return{activationPage:"",accept:!1,showAccept:!0,innerAlert:!1}},watch:{async alert(t,e){console.log("alert changed...."),this.main.loadingSomethingBigger=!0;let[a,s]=await _(T.getActivationCode(this.alertUserId));if(this.main.loadingSomethingBigger=!1,a)return void this.$q.notify({type:"negative",message:a||a.response||"Couldn't fetch activation link"});this.innerAlert=!0;let{activationCode:n}=s,i=window.location.protocol+"//"+window.location.host+`/#/activate?activateToken=${n}`;this.activationPage=i}},methods:{copyActivationLinkToClipBoard(){navigator.clipboard.writeText(this.activationPage).then((()=>{this.$q.notify({type:"positive",message:"Activation link copied!"})}),(()=>{}))}}},P=N,Q=a("65c6"),O=a("6ac5"),I=a("05c0"),$=Object(h["a"])(P,E,L,!1,null,null,null),R=$.exports;C()($,"components",{QDialog:g["a"],QCard:b["a"],QCardSection:v["a"],QToolbar:Q["a"],QToolbarTitle:O["a"],QBtn:y["a"],QTooltip:I["a"],QCardActions:w["a"]}),C()($,"directives",{ClosePopup:k["a"]});a("bc3a");const U=a("1712").to,D=a("20e6"),F=a("c2a1").default;var B={name:"registrationForm",components:{terms:A,activationLink:R},props:["inside","main"],async created(){F.setSettings({TBURL:D["TB_URL"]}),F.setSettings(D),this.inside&&(this.showAccept=!1,this.accept=!0,this.showActivation=!0,this.activationEmail=!1,this.showActivationLink=!0)},data(){return{activationPage:"",accept:!1,showAccept:!0,showActivation:!1,showActivationLink:!1,activationEmail:!0,email:"",firstName:"",lastName:"",gender:"Male",genders:["Male","Female"],dob:"",password:"",cpassword:"",passwordErrorMessage:"",users:[],alert:!1,alertUserId:null}},methods:{changeAccept(t){this.accept=t},submit(){this.$refs.userRegistrationForm.submit()},mainLocal(){return this},isValidEmail(){const t=/^(?=[a-zA-Z0-9@._%+-]{6,254}$)[a-zA-Z0-9._%+-]{1,64}@(?:[a-zA-Z0-9-]{1,63}\.){1,8}[a-zA-Z]{2,63}$/;return t.test(this.email)||"Invalid email"},showCustom(t=""){const e=this.$q.dialog({title:t,message:"",progress:{spinner:u["a"],color:"primary"},persistent:!0,ok:!1}),a=setInterval((()=>{!1===this.working&&(clearInterval(a),e.hide())}),500)},async createUser(){return F.setSettings({TBURL:D["TB_URL"]}),new Promise((async(t,e)=>{if(!0!==this.accept)return this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"You need to read and accept the terms and conditions"}),t(!1);this.working=!0,this.showCustom();let[a,s]=await U(F.createUser({email:this.email,firstName:this.firstName,lastName:this.lastName,gender:this.gender,dateOfBirth:this.dob,authority:"CUSTOMER_USER"},{activationEmail:this.activationEmail,showActivationLink:this.showActivationLink},!0));if(this.working=!1,a){a=a.msg||a.message||a.error||a;try{a=JSON.parse(a)}catch(n){}if("object"===typeof a){let t=Object.keys(a);a=a[t[0]]}this.$q.notify({type:"negative",message:a}),t(!1)}else this.showActivationLink?(this.alertUserId=s,this.alert=!1,this.$nextTick((()=>this.alert=!0))):this.$q.notify({type:"positive",message:"Registration successful. Check your email to activate you account."}),this.main.listUsers()}))},onReset(){this.email=null,this.firstName=null,this.lastName=null,this.password=null,this.cpassword=null,this.accept=!1}}},j=B,M=a("0378"),z=a("27f9"),J=a("ddd8"),Z=a("0016"),Y=a("7cbe"),V=a("52ee"),W=a("8f8e"),K=Object(h["a"])(j,o,r,!1,null,null,null),G=K.exports;C()(K,"components",{QForm:M["a"],QInput:z["a"],QSelect:J["a"],QIcon:Z["a"],QPopupProxy:Y["a"],QDate:V["a"],QBtn:y["a"],QToggle:f["a"],QCheckbox:W["a"],QDialog:g["a"],QCard:b["a"],QCardSection:v["a"]}),C()(K,"directives",{ClosePopup:k["a"]});const X=a("20e6"),H=a("ea76").default;var tt={name:"authForms",components:{loginForm:i["a"],registrationForm:G},props:{},async created(){this.extendedProjectName=X["PROJECTEXTENDED"]},data(){return{translate:H.translate,extendedProjectName:"",tab:"login",loggedin:!1,working:!1}},methods:{}},et=tt,at=(a("3344"),a("429bb")),st=a("7460"),nt=a("adad"),it=a("823b"),ot=Object(h["a"])(et,s,n,!1,null,"ac435e80",null);e["a"]=ot.exports;C()(ot,"components",{QCard:b["a"],QCardSection:v["a"],QSelect:J["a"],QTabs:at["a"],QTab:st["a"],QTabPanels:nt["a"],QTabPanel:it["a"]})},"0924":function(t,e,a){"use strict";a.r(e);const s=a("5ef6");e["default"]={home:s}},1326:function(t){t.exports=JSON.parse('{"English":"EN","Kiswalihi":"SWA"}')},"2cbd":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pa-md q-gutter-sm"},[a("q-breadcrumbs",[a("q-breadcrumbs-el",{attrs:{icon:"home",to:"/home"}}),t._l(t.links,(function(t){return a("q-breadcrumbs-el",{key:t.link,attrs:{label:t.label,icon:t.icon,to:t.to}})}))],2)],1)},n=[],i={name:"breadcrumbs",props:{links:{type:Array}},data(){return{}},methods:{}},o=i,r=a("2877"),l=a("ead5"),c=a("079e"),u=a("eebe"),d=a.n(u),m=Object(r["a"])(o,s,n,!1,null,null,null);e["a"]=m.exports;d()(m,"components",{QBreadcrumbs:l["a"],QBreadcrumbsEl:c["a"]})},"310f":function(t,e,a){"use strict";var s=function(){var t=this,e=this,a=e.$createElement,s=e._self._c||a;return s("q-form",{staticClass:"text-white bg-secondary",on:{submit:e.onSubmit,reset:e.onReset}},[s("q-input",{attrs:{filled:"",type:"email",label:e.translate("FIELDS.EMAIL"),hint:e.translate("FIELDS.EMAIL"),"lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please enter your email address"},function(e){return t.isValidEmail()||"Invalid email address"}]},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),s("q-input",{attrs:{filled:"",type:"password",label:"Password","lazy-rules":"",rules:[function(t){return null!==t&&""!==t||"Please enter your password"}],"error-message":e.passwordErrorMessage},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),s("div",{staticClass:"q-pa-md"},[s("q-btn",{attrs:{label:"Submit",type:"submit",color:"primary"}}),s("q-btn",{staticClass:"q-ml-sm",attrs:{label:"Reset",type:"reset",color:"white",flat:""}})],1)],1)},n=[],i=(a("ddb0"),a("cf57"));const o=a("1712").to,r=a("20e6"),l=a("c2a1").default,c=a("ea76").default;var u={name:"loginForm",data(){return{translate:c.translate,email:"",password:"",passwordErrorMessage:""}},methods:{isValidEmail(){const t=/^(?=[a-zA-Z0-9@._%+-]{6,254}$)[a-zA-Z0-9._%+-]{1,64}@(?:[a-zA-Z0-9-]{1,63}\.){1,8}[a-zA-Z]{2,63}$/;return t.test(this.email)||"Invalid email"},showCustom(t=""){const e=this.$q.dialog({title:t,message:"",progress:{spinner:i["a"],color:"primary"},persistent:!0,ok:!1}),a=setInterval((()=>{!1===this.working&&(clearInterval(a),e.hide())}),500)},async onSubmit(){l.setSettings({TBURL:r["TB_URL"]});r["TB_URL"];let t={email:this.email,password:this.password};this.working=!0,this.showCustom();let[e,a]=await o(l.login(t));if(this.working=!1,e)return this.loggedin=!1,this.$q.notify({type:"negative",message:e.error||e.message||"failed to log in"}),this.password="",void(this.passwordErrorMessage=e.error||e.message||"wrong email/password");this.$q.notify({type:"positive",message:"log in successful"});l.getDefaultPageAfterLogin();window.location.assign(l.getDefaultPageAfterLogin())},onReset(){this.email=null,this.password=null}}},d=u,m=a("2877"),p=a("0378"),h=a("27f9"),f=a("9c40"),g=a("eebe"),b=a.n(g),v=Object(m["a"])(d,s,n,!1,null,null,null);e["a"]=v.exports;b()(v,"components",{QForm:p["a"],QInput:h["a"],QBtn:f["a"]})},3344:function(t,e,a){"use strict";a("853b")},"3ca2":function(t){t.exports=JSON.parse('{"tmp":{"EN":" ","SWA":" "}}')},"5bfc":function(t,e,a){var s={"./inspirafarms/translations.json":"b58d"};function n(t){var e=i(t);return a(e)}function i(t){if(!a.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}n.keys=function(){return Object.keys(s)},n.resolve=i,t.exports=n,n.id="5bfc"},"5c62":function(t,e,a){var s={"./inspirafarms/home.json":"86d9"};function n(t){var e=i(t);return a(e)}function i(t){if(!a.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}n.keys=function(){return Object.keys(s)},n.resolve=i,t.exports=n,n.id="5c62"},"5ef6":function(t,e,a){let s=[],n=a("20e6").PROJECT.toLowerCase(),i=a("5c62")(`./${n}/home.json`);s=s.concat(i).concat([{name:"Profile Management",icon:"person",link:"/#/profile",description:"Profile"}]),t.exports=s},"853b":function(t,e,a){},"86d9":function(t){t.exports=JSON.parse('[{"name":"ColdRooms","icon":"ac_unit","link":"/#/coldrooms","description":"Customer Cold Rooms"}]')},"9fea":function(t,e){function a(){return"\n## Terms and Conditions\n\n...\n    "}t.exports=a},b58d:function(t){t.exports=JSON.parse('{"PROJECT":{"NAME":{"EN":"InspiraFarms","SWA":"InspiraFarms"}},"FIELDS":{"EMAIL":{"EN":"email","SWA":"anwani"}}}')},ea76:function(t,e,a){"use strict";a.r(e);var s=a("9523"),n=a.n(s);a("5319");a("20e6").PROJECT.toLowerCase();class i{constructor(){n()(this,"translate",(t=>{let e=t.split("."),s=a("3ca2"),n=a("5bfc")(`./${this.projectName}/translations.json`),i="";try{if(!n[e[0]])throw"error";i=n[e[0]][e[1]]}catch(o){s[e[0]]&&(i=s[e[0]][e[1]])}if("object"===typeof i){let t=this.getShortLang();i=i[t]}return i})),this.init()}init(){this.projectName=a("20e6").PROJECT.toLowerCase(),this.defaultLang=(a("20e6").lang||"").toUpperCase()}getLangshort(t){}getLang(t){t=t||window.localStorage.getItem(this.langField)||this.defaultLang||"EN";let e=this.listLangs();function a(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}for(let s in e){let n=a(`(${t})`),i=e[s].match(n);if(i){t=e[s];break}}return t}getShortLang(t){t=t||window.localStorage.getItem(this.langField)||this.defaultLang||"EN";let e=this.listLangs();for(let a in e)if(e[a]===t){let e=t.match(/\([^\)]+/);t=e[0].replace(/\(/,"");break}return t}listLangs(){let t=a("1326"),e=[];for(let a in t)e.push(`${a} (${t[a]})`);return e}setLang(t){t=this.getShortLang(t),window.localStorage.setItem(this.langField,t)}}const o=new i;e["default"]=o}}]);